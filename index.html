<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü–æ–π–º–∞–π —Ñ—É—Ç–±–æ–ª–∫—É ‚Äî MUVIT</title>
  <meta name="theme-color" content="#d1dce7" />
  <meta name="description" content="MUVIT: –ü–æ–π–º–∞–π —Ñ—É—Ç–±–æ–ª–∫—É ‚Äî –∏–≥—Ä–∞–π –∏ –Ω–∞–π–¥–∏ —Å–≤–æ–π —Å—Ç–∏–ª—å" />
  <style>
    :root{
      --bg:#d1dce7;
      --text:#44606e;
      --btn:#e3801e;
      --muted:#6e8a97;
      --panel:#ffffff;
      --border:#c7d3de;
    }
    /* –ë—Ä–µ–Ω–¥–æ–≤—ã–π —à—Ä–∏—Ñ—Ç (Century Gothic Bold) */
    @font-face{
      font-family:'MUVITBrand';
      src:url('./assets/centurygothic_bold.ttf') format('truetype');
      font-weight:700;
      font-style:normal;
      font-display:swap;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);}
    body{font-family:'MUVITBrand', system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial; display:grid; place-items:center;}
    .wrap{width:min(760px,100%);padding:16px;}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:22px;overflow:hidden;box-shadow:0 10px 40px rgba(50,70,90,.15);}
    header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border);}
    .brand{display:flex;gap:12px;align-items:center}
    .brand img{height:36px}
    h1{font-size:20px;line-height:1.2;margin:0}
    h1 small{display:block;color:var(--muted);font-size:12px}
    .btn, .shop a{background:var(--btn);color:#fff;text-decoration:none;border:none;border-radius:12px;padding:10px 14px;cursor:pointer;font-weight:700;display:inline-block}
    .btn:active{transform:translateY(1px)}
    .shop a:hover{opacity:.92}
    .game{position:relative;}
    canvas{width:100%;height:auto;display:block;background:#e9f1f7;}
    .hud{position:absolute;left:12px;top:10px;right:12px;display:flex;justify-content:space-between;gap:8px;pointer-events:none}
    .pill{background:#f5f9fc;border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:13px;color:var(--text);box-shadow:0 6px 16px rgba(0,0,0,.05)}
    .overlay{position:absolute;inset:0;display:grid;place-items:center;background:rgba(209,220,231,.55);backdrop-filter:blur(4px);}
    .screen{width:min(560px,92%);background:#fff;border:1px solid var(--border);border-radius:18px;padding:22px;text-align:center;box-shadow:0 12px 36px rgba(50,70,90,.18);}
    .title{font-size:28px;margin:0 0 8px}
    .subtitle{margin:0 0 14px;color:var(--muted)}
    footer{padding:12px 14px;text-align:center;border-top:1px solid var(--border);color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div class="brand">
          <img src="assets/logo.png" alt="MUVIT" />
          <div>
            <h1>–ü–æ–π–º–∞–π —Ñ—É—Ç–±–æ–ª–∫—É <small>MUVIT ‚Äî –º–∏–Ω–∏‚Äë–∏–≥—Ä–∞</small></h1>
          </div>
        </div>
        <div class="shop">
          <a href="https://clck.ru/3PW6wp" target="_blank" rel="noopener">üõç –°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ WB</a>
        </div>
      </header>

      <div class="game">
        <canvas id="game" width="640" height="960" aria-label="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ"></canvas>

        <div class="hud">
          <div class="pill">–°—á—ë—Ç: <b id="score">0</b></div>
          <div class="pill">–ñ–∏–∑–Ω–∏: <b id="lives">3</b></div>
          <div class="pill">–†–µ–∫–æ—Ä–¥: <b id="best">0</b></div>
        </div>

        <div class="overlay" id="startScreen">
          <div class="screen">
            <p class="title">–ü–æ–π–º–∞–π —Ñ—É—Ç–±–æ–ª–∫—É</p>
            <p class="subtitle">–¢–∞–ø–∞–π –ø–æ –ø–∞–¥–∞—é—â–∏–º —Ñ—É—Ç–±–æ–ª–∫–∞–º. –ù–µ –ø—Ä–æ–º–∞—Ö–Ω–∏—Å—å —Ç—Ä–∏ —Ä–∞–∑–∞!</p>
            <p><button class="btn" id="startBtn">–ò–≥—Ä–∞—Ç—å</button></p>
          </div>
        </div>

        <div class="overlay" id="gameOver" hidden>
          <div class="screen">
            <p class="title">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</p>
            <p class="subtitle">–°—á—ë—Ç: <b id="finalScore">0</b> ¬∑ –†–µ–∫–æ—Ä–¥: <b id="finalBest">0</b></p>
            <p class="subtitle"><a class="btn" href="https://clck.ru/3PW6wp" target="_blank" rel="noopener">üõç –°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ WB</a></p>
            <p><button class="btn" id="againBtn">–ï—â—ë —Ä–∞–∑</button></p>
          </div>
        </div>
      </div>

      <footer>¬© MUVIT ‚Äî –∏–≥—Ä–∞–π –∏ –Ω–∞–π–¥–∏ —Å–≤–æ–π —Å—Ç–∏–ª—å</footer>
    </div>
  </div>

<script>
(() => {
  const teesSrc = ['assets/tee1.png','assets/tee2.png','assets/tee3.png','assets/tee4.png','assets/tee5.png','assets/tee6.png','assets/tee7.png','assets/tee8.png'];

  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  const W = 640, H = 960;
  canvas.width = W * DPR; canvas.height = H * DPR; canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
  ctx.scale(DPR, DPR);

  const scoreEl = document.getElementById('score');
  const livesEl = document.getElementById('lives');
  const bestEl = document.getElementById('best');
  const startScreen = document.getElementById('startScreen');
  const gameOver = document.getElementById('gameOver');
  const startBtn = document.getElementById('startBtn');
  const againBtn = document.getElementById('againBtn');
  const finalScore = document.getElementById('finalScore');
  const finalBest = document.getElementById('finalBest');

  // Load images
  const images = teesSrc.map(src => { const i=new Image(); i.src=src; return i; });
  function rand(a,b){ return a + Math.random()*(b-a); }
  const tees = [];
  const effects = [];
  let running=false, score=0, lives=3, best=+localStorage.getItem('muvit_best')||0;
  bestEl.textContent = best;
  let t=0, last=0, lastSpawn=0, speed=170;

  function spawn(){
    const size = rand(72, 120);
    const x = rand(size*0.5, W - size*0.5);
    const y = -size;
    const vy = rand(speed*0.8, speed*1.25);
    const img = images[Math.floor(Math.random()*images.length)];
    const rot = rand(-0.08,0.08);
    const spin = rand(-0.4,0.4);
    tees.push({x,y,vy,size,img,rot,spin});
  }
  function drawBG(){
    ctx.fillStyle = '#e9f1f7';
    ctx.fillRect(0,0,W,H);
  }
  function draw(){
    drawBG();
    for(const te of tees){
      ctx.save();
      ctx.translate(te.x, te.y); ctx.rotate(te.rot);
      const w = te.size, h = te.size * (te.img.naturalHeight? te.img.naturalHeight/te.img.naturalWidth : 1.1);
      ctx.drawImage(te.img, -w/2, -h/2, w, h);
      ctx.restore();
    }
    // effects
    for(const e of effects){
      ctx.globalAlpha = e.a; ctx.fillStyle = e.c; ctx.beginPath(); ctx.arc(e.x,e.y,e.r,0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1;
    }
  }
  function update(dt){
    t += dt; speed += dt*2;
    if(t - lastSpawn > Math.max(0.2, 0.9 - t*0.02)){ spawn(); lastSpawn=t; }
    for(let i=tees.length-1;i>=0;i--){
      const te = tees[i];
      te.y += te.vy * dt; te.rot += te.spin * dt;
      if(te.y - te.size/2 > H){ tees.splice(i,1); miss(); }
    }
    for(let i=effects.length-1;i>=0;i--){
      const e = effects[i]; e.r += 60*dt; e.a -= 1.2*dt; if(e.a<=0) effects.splice(i,1);
    }
  }
  function loop(ts){
    if(!running){ last = ts; return; }
    const dt = Math.min(0.033, (ts - last)/1000); last = ts;
    update(dt); draw(); requestAnimationFrame(loop);
  }
  function start(){
    score=0; lives=3; t=0; lastSpawn=0; speed=170; tees.length=0; effects.length=0;
    document.getElementById('score').textContent=score;
    document.getElementById('lives').textContent=lives;
    startScreen.hidden = true; gameOver.hidden=true; running=true;
    requestAnimationFrame(ts=>{ last=ts; loop(ts); });
  }
  function end(){
    running=false; finalScore.textContent=score; best=Math.max(best,score); localStorage.setItem('muvit_best', best);
    bestEl.textContent=best; finalBest.textContent=best; gameOver.hidden=false;
  }
  function miss(){ lives--; livesEl.textContent=lives; if(lives<=0) end(); }
  function getPos(e){ const r=canvas.getBoundingClientRect(); const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left; const y=(e.touches?e.touches[0].clientY:e.clientY)-r.top; return {x,y}; }
  function hit(x,y){
    for(let i=tees.length-1;i>=0;i--){
      const te = tees[i]; const r = te.size*0.6; const dx = x - te.x; const dy = y - te.y;
      if(dx*dx + dy*dy < r*r){ tees.splice(i,1); score++; scoreEl.textContent=score; effects.push({x,y,r:6,a:.7,c:'rgba(227,128,30,.35)'}); return true; }
    } effects.push({x,y,r:4,a:.5,c:'rgba(0,0,0,.15)'}); return false;
  }
  canvas.addEventListener('click', e=>{ if(running){ const p=getPos(e); hit(p.x,p.y); } });
  canvas.addEventListener('touchstart', e=>{ if(running){ const p=getPos(e); hit(p.x,p.y); } }, {passive:true});
  startBtn.onclick = () => start();
  againBtn && (againBtn.onclick = () => start());

  // initial preview
  draw();
})();
</script>
</body>
</html>
